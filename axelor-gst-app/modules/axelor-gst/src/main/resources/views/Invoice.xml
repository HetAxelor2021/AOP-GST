<?xml version="1.0" encoding="UTF-8"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views
  http://axelor.com/xml/ns/object-views/object-views_5.4.xsd">
	
	<grid name="invoice-grid" title="Invoices" model="com.axelor.gst.db.Invoice" >
		<field name="status" />
		<field name="company" />
		<field name="reference" />
		<field name="dateInvoice" />
		<field name="priority" />
		<field name="party" />
		<field name="partyContact" />
		<field name="invoiceAddress" />
		<field name="shippingAddress" />
		<field name="useInvoiceAddressShipping" />
		<field name="netAmount" />
		<field name="netIGST" />
		<field name="netCSGT" />
		<field name="netSGST" />
		<field name="grossAmount" />
		<field name="invoiceItemsList" />
	</grid>
	
	<kanban columnBy="status" model="com.axelor.gst.db.Invoice" sequenceBy="priority" title="Invoices" name="invoice-kanban" 
		draggable="true" onMove="" onNew="" limit="2" 
	>
		
		<field name="company" />
		<field name="reference" />
		<field name="dateInvoice" />
		
		<field name="party" />
		<field name="partyContact" />
		<field name="invoiceAddress" />
		<field name="shippingAddress" />
		<field name="useInvoiceAddressShipping" />
		<field name="netAmount" />
		<field name="netIGST" />
		<field name="netCSGT" />
		<field name="netSGST" />
		<field name="grossAmount" />
		<field name="invoiceItemsList" />
		<template>
			<![CDATA[
				<div>
					<h4>Company Name:</h4>
					<h5>{{record.company}}</h5>
					<br />
					<h4>Date Invoice:</h4>
					<h5>{{record.dateInvoice</h5>
					<br />
					<h4>Party Name:</h4>
					<h5>{{record.party}}</h5>
					<br />
					<h4>Party Contact:</h4>
					<h5>{{record.partyContact}}</h5>
					<br />
					<h4>GrossAmount:</h4>
					<h5>{{record.grossAmount}}</h5>
					<br />
					<h4>Invoice Item List:</h4>
					<h5>{{record.invoiceItemList</h5>
				</div>
				
			]]>
		</template>
	
	</kanban>
	
	<form name="invoice-form" title="Invoice" model="com.axelor.gst.db.Invoice" onNew="action-invoice-form-onnew,action-invoice-status-onchange-method" onLoad="action-invoice-status-start-onload, action-invoice-status-onchange-method">
			<panel title="Invoice" >
				<field name="status" widget="navSelect" colSpan="12" />
				
				<!-- <field name="statusValue"  colSpan="12" /> -->
				<button name="btnDraft" title="Draft" onClick="action-draft-invoice-onclick,action-invoice-status-onchange-method" hideIf="statusValue>=1"/>
				<button name="btnValidated" title="Validated" onClick="action-validated-invoice-onclick,action-invoice-status-onchange-method" hideIf="statusValue>=2"/>
				<button name="btnPaid" title="paid" onClick="action-paid-invoice-onclick,action-invoice-status-onchange-method" hideIf="statusValue>=3"/>
				<button name="btnCancelled" title="Cancelled" onClick="action-cancelled-invoice-onclick,action-invoice-status-onchange-method" hideIf="statusValue>=4" />
				<field name="company" canNew="true" />
				<field name="reference" />
				<field name="dateInvoice" />
				<field name="priority" />
				<field name="party" canNew="true" onChange="action-invoice-form-party-onchange"/>
				<field name="partyContact" />
				<field name="invoiceAddress" />
				<field name="shippingAddress" hideIf="useInvoiceAddressShipping"/>
				<field name="useInvoiceAddressShipping" />
				<field name="netAmount" />
				<field name="netIGST" />
				<field name="netCSGT" />
				<field name="netSGST" />
				<field name="grossAmount" />
				<panel-related field="invoiceItemsList" />
		</panel>
	</form>
	
	
	<action-record name="action-invoice-form-party-onchange" model="com.axelor.gst.db.Invoice" >
		<field name="partyContact" expr="eval:null" />
		<field name="invoiceAddress" expr="eval:null" />
		<field name="shippingAddress" expr="eval:null" />
		<field name="partyContact" expr="eval:party.contactList.get(0)"  if="party.contactList.size() > 0"/>
		<field name="invoiceAddress" expr="eval:party.addressList.get(0)" if="party.addressList.get(0).type.equals('default') || party.addressList.get(0).type.equals('invoice')"/> 
		<field name="shippingAddress" expr="eval:party.addressList.get(0)" if="  !useInvoiceAddressShipping &amp;&amp; (party.addressList.get(0).type.equals('shipping') || party.addressList.get(0).type.equals('other'))" />
		
	</action-record>
	
	
	
	<action-record name="action-invoice-form-onnew" model="com.axelor.gst.db.Invoice" >
		<field name="dateInvoice" expr="eval:__datetime__" />
		<field name="status" expr="eval:statusContext" />
		
	</action-record>
	<!-- 
	<action-record name="action-invoice-status-onchange" model="com.axelor.gst.db.Invoice">
		<field name="statusValue" expr="action: action-invoice-status-onchange-method" />
	</action-record> -->
	
	
	
	
	<action-record name="action-invoice-status-start-onload" model="com.axelor.gst.db.Invoice">
		<field name="status" expr="eval:statusContext" />
		
		
	
	</action-record>
	
	<action-method name="action-invoice-status-onchange-method" >
		<call class="com.axelor.gst.web.InvoiceController" method="statusValueProvider" />
	</action-method>
	
	<action-record name="action-draft-invoice-onclick" model="com.axelor.gst.db.Invoice" >
		<field name="status" expr="draft" />
	</action-record>
	
	
	<action-record name="action-validated-invoice-onclick" model="com.axelor.gst.db.Invoice" >
		<field name="status" expr="validated" />
	</action-record>
	
	<action-record name="action-paid-invoice-onclick" model="com.axelor.gst.db.Invoice" >
		<field name="status" expr="paid" />
	</action-record>
	 
	<action-record name="action-cancelled-invoice-onclick" model="com.axelor.gst.db.Invoice" >
		<field name="status" expr="cancelled" />
	</action-record>
	
	<search-filters name="invoice-search-filters" model="com.axelor.gst.db.Invoice" title="Invoices" >
		<field name="priority"  />
		<filter title="status filter" >
			<domain>priority == "2"</domain>
		</filter>
	</search-filters>
  
 </object-views>